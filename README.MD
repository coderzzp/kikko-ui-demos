### KIKKO-UI-DEMOS
æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€ä¸ª React ç»„ä»¶åº“

## Demo01ï¼šä½¿ç”¨ parcelï¼ŒæŠŠç»„ä»¶è·‘èµ·æ¥ [source](https://github.com/coderzzp/kikko-ui-demos/tree/main/demo01)
é¡¹ç›®åˆå§‹åŒ–
> npm init  

åˆ›å»ºæºä»£ç æ–‡ä»¶
> mkdir src

åˆ›å»º index.jsx æˆ‘ä»¬çš„ ui ç»„ä»¶
```javascript
// src/index.jsx
import React from 'react'
import './index.less'

const Button = ()=>{
    return <div className="kikko-button">im a button</div>
}
export default Button

```
åˆ›å»ºç»„ä»¶æ ·å¼
```less
.kikko-button{
    color: green;
}
```
æ­¤æ—¶æˆ‘ä»¬çš„ç»„ä»¶å·²ç»å†™å¥½äº†ï¼Œå¼•å…¥ parcel å°†æˆ‘ä»¬çš„ç»„ä»¶åº”ç”¨èµ·æ¥ï¼Œå…³äº [parcel](https://parceljs.org/)
> yarn add parcel -D

åœ¨ package.json ä¸­å°† parcel ä½œæˆ npm è„šæœ¬
```json
 "demo": "parcel ./demo/index.html --out-dir ./parcel_dist"
```
ä½¿ç”¨ parcel
> yarn demo

![20210219161840.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210219161840.png)

æ‰“å¼€ http://localhost:1234 ï¼Œé¡µé¢ä¸­å‡ºç°æˆ‘ä»¬çš„button ç»„ä»¶
![20210219161957.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210219161957.png)

æˆ‘ä»¬å·²ç»å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç»„ä»¶çš„ä½¿ç”¨æ•ˆæœäº†ï¼Œä¸‹ä¸€ç« æˆ‘ä»¬å°†è®²è¿°å°†ç»„ä»¶æ‰“åŒ…å¹¶å‘å¸ƒåˆ°npm ä¸Š

---------------
## Demo02ï¼šä½¿ç”¨ rollup æ‰“åŒ…ç»„ä»¶[source](https://github.com/coderzzp/kikko-ui-demos/tree/main/demo02)
å®‰è£…rollup
> yarn add rollup -D

æ ¹æ®rollupçš„æ‰“åŒ…è§„åˆ™ï¼Œåˆ›å»º rollup.config.js æ–‡ä»¶
```js
import babel from '@rollup/plugin-babel';
import postcss from 'rollup-plugin-postcss';
import autoprefixer from 'autoprefixer';
import cssnano from 'cssnano';
import pkg from './package.json';

export default {
  // å…¥å£æ–‡ä»¶
  input: 'src/index.jsx',
  // è¯»å– package.json çš„ module å­—æ®µï¼Œå°†åŒ…æ‰“æˆ esm æ ¼å¼
  output: [
    { file: pkg.module, format: 'esm' },
  ],
  plugins: [
    // postcsså¤„ç†lessæ–‡ä»¶ï¼Œå¹¶ç”¨ autoprefixer å¤„ç†å…¼å®¹,cssnano å‹ç¼©
    postcss({
      plugins: [autoprefixer,cssnano],
      extensions: ['.less', '.css'],
      use: ['less'],
      extract: 'style.css', // è¾“å‡ºè·¯å¾„
    }),
    // å‘ŠçŸ¥ rollup ä½¿ç”¨ babel ç¼–è¯‘ä»£ç 
    babel({
      // ä½¿ç”¨ babel transform runtime ç¼–è¯‘ä»£ç 
      babelHelpers: 'runtime',
      extensions: ['.js', '.ts', '.jsx','tsx'],
    }),
  ],
};

```
rollupä½¿ç”¨babelï¼Œé‚£ä¹ˆæ˜¾è€Œæ˜“è§éœ€è¦ babel é…ç½®
``` js

module.exports = {
  presets: [
    [
      '@babel/preset-env' // ç¼–è¯‘ ES ä»£ç 
    ],
    '@babel/preset-react', // ç¼–è¯‘ jsx ä»£ç 
  ],
  "plugins": [
    [
      "@babel/plugin-transform-runtime",  
      {
        "corejs": 3 // æŒ‡å®š runtime-corejs çš„ç‰ˆæœ¬ï¼Œç›®å‰æœ‰ 2 3 ä¸¤ä¸ªç‰ˆæœ¬
      }
    ]
  ]
};

```
package.json ä¸­æ–°å¢ module å­—æ®µ
```
"module": "dist/index.esm.js",
```
ä»¥åŠæ–°çš„æ‰“åŒ…è„šæœ¬
```
"build": "rm -rf dist && rollup -c"
```
æ‰§è¡Œæ‰“åŒ…è„šæœ¬
> yarn build

æˆ‘ä»¬å‘ç°æ–‡ä»¶å¤¹ä¸‹å¤šäº†distç›®å½•ï¼Œè¡¨ç¤ºæ‰“åŒ…æˆåŠŸ  

![20210220105022.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210220105022.png)

### Reference
[@babel/plugin-transform-runtime æ˜¯ä»€ä¹ˆï¼Ÿ](https://zhuanlan.zhihu.com/p/147083132)

--------------

## Demo03ï¼šæ”¯æŒTypescript[source](https://github.com/coderzzp/kikko-ui-demos/tree/main/demo03)
é¦–å…ˆæˆ‘ä»¬å…ˆæŠŠç»„ä»¶ä»£ç æ”¹æˆ tsx çš„æ ¼å¼
```js
// src/index.tsx
import React from 'react'
import './index.less'

interface ButtonProps {
    buttonWord:string
}

const Button = ({buttonWord='defaultWord'}:ButtonProps)=>{
    return <div className="kikko-button">{buttonWord}</div>
}
export default Button
```
æ‰§è¡Œ `yarn demo`ï¼Œå‘ç°æŠ¥é”™äº†ï¼Œå› ä¸ºparcel éœ€è¦é…ç½®ts configï¼Œäºæ˜¯æ–°å¢ `tsconfig.json `
å†æ‰§è¡Œ`yarn demo`ï¼Œdemo æ‰§è¡ŒæˆåŠŸ
![20210220113828.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210220113828.png)

æ‰“åŒ…é…ç½®ä¹Ÿéœ€è¦å¢åŠ  @babel/preset-typescript
> yarn add @babel/preset-typescript -D
```js
// babel.config.js
module.exports = {
  presets: [
    [
      '@babel/preset-env' // ç¼–è¯‘ ES ä»£ç 
    ],
    '@babel/preset-typescript', // ç¼–è¯‘ ts ä»£ç 
    '@babel/preset-react', // ç¼–è¯‘ jsx ä»£ç 
  ],
  "plugins": [
    [
      "@babel/plugin-transform-runtime",  // ä½¿ç”¨
      {
        "corejs": 3 // æŒ‡å®š runtime-corejs çš„ç‰ˆæœ¬ï¼Œç›®å‰æœ‰ 2 3 ä¸¤ä¸ªç‰ˆæœ¬
      }
    ]
  ]
};

```
æ‰§è¡Œ `yarn build` ï¼Œæ‰“åŒ…æˆåŠŸï¼Œä½†æ˜¯æˆ‘ä»¬ç°åœ¨æ‰“å‡ºæ¥çš„æ–‡ä»¶æ˜¯æ²¡æœ‰types ç±»å‹å®šä¹‰çš„ï¼Œæˆ‘ä»¬ç°åœ¨æ¥åšè¿™ä»¶äº‹ï¼Œä½¿ç”¨ç±»å‹ç¼–è¯‘éœ€è¦ç”¨åˆ° typescript åŒ…
> yarn add typescript @types/react -D


å®šä¹‰ç»„ä»¶åŒ…çš„ types æ–‡ä»¶
```json
  // package.json
  "types":"dist/types/index.d.ts",
```

ç„¶ååœ¨package.json æ–‡ä»¶ä¸­æ–°å¢è„šæœ¬ç¼–è¯‘ç±»å‹
æ‰§è¡Œ `yarn build:types` å‘ç° dist æ–‡ä»¶ä¸‹æ–°å¢äº† types æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯å½“å‰ç»„ä»¶çš„ç±»å‹å®šä¹‰

æˆ‘ä»¬å°†demoæ”¹æˆ ts çš„ç”¨æ³•ï¼Œå°†demo/index.jsx -> demo/index.tsxï¼Œä¼ å…¥ä¸€ä¸ªé”™è¯¯çš„props
![20210220120430.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210220120430.png)

å°†å†™æ³•æ”¹ä¸ºå¦‚ä¸‹ï¼Œtsç±»å‹æŠ¥é”™æ¶ˆå¤±
![20210220120540.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210220120540.png)
é¡µé¢ç”Ÿæ•ˆï¼š
![20210220120606.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210220120606.png)

---------------
## Demo04ï¼šå‘å¸ƒåˆ° npm [source](https://github.com/coderzzp/kikko-ui-demos/tree/main/demo04)
okï¼Œç»„ä»¶ä»£ç å†™å¥½äº†ä¹‹åæˆ‘ä»¬éœ€è¦å‘åˆ°npm è®©å¤§å®¶ä½¿ç”¨ï¼Œæˆ‘ä»¬å…ˆåœ¨package.jsonä¸­ç»™ç»„ä»¶åŒ…èµ·ä¸€ä¸ªåå­—ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨äº†kikko-uiè¿™ä¸ªåç§°
> npm adduser 

æˆ‘ä»¬å°†package.json çš„è„šæœ¬æ”¹åŠ¨ä¸€ä¸‹
```
"build:types": "tsc --emitDeclarationOnly",
"build:js": "rollup -c",
"build": "rm -rf dist && yarn build:types && yarn build:js",
"prepublishOnly": "yarn build" // å‘å¸ƒå‰è‡ªåŠ¨ç¼–è¯‘æ‰“åŒ…
```
> npm publish

prepublishOnlyè¿™ä¸ªhookä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åšæ‰“åŒ…ä»¥åŠç¼–è¯‘ç±»å‹å¤„ç†
![20210222115526.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210222115526.png)
ä¸Šå›¾è¡¨ç¤ºå‘å¸ƒæˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ create-react-appæµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„ç»„ä»¶åº“
> npx create-react-app kikko-test --template typescript 
kikko-test
> cd kikko-test && yarn start

å¼•å…¥ç»„ä»¶å¹¶ä½¿ç”¨
```js
import Button from 'kikko-ui';
import'kikko-ui/dist/style.css';
```
![20210222122933.png](https://raw.githubusercontent.com/coderzzp/cloud-image/main/vs-picgo20210222122933.png)

ğŸš€ğŸš€ğŸš€ å¤§åŠŸå‘Šæˆ


